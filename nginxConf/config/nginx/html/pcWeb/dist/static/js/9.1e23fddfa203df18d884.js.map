{
  "version": 3,
  "sources": [
    "webpack:///src/views/messageBoard.vue",
    "webpack:///./src/views/messageBoard.vue?f615",
    "webpack:///./src/views/messageBoard.vue"
  ],
  "names": [
    "__webpack_exports__",
    "data",
    "pageMinHeight",
    "source",
    "showCancel",
    "submitting",
    "value",
    "comments",
    "commentInfo",
    "currentPage",
    "pageSize",
    "total",
    "toInfo",
    "userInfo",
    "watch",
    "computed",
    "components",
    "CommentList",
    "__WEBPACK_IMPORTED_MODULE_1__components_CommentList__",
    "CommentBox",
    "__WEBPACK_IMPORTED_MODULE_2__components_CommentBox__",
    "Sticky",
    "__WEBPACK_IMPORTED_MODULE_3__components_Sticky__",
    "created",
    "this",
    "getCommentDataList",
    "mounted",
    "that",
    "window",
    "innerHeight",
    "$",
    "scroll",
    "_this",
    "document",
    "height",
    "scrollTop",
    "length",
    "params",
    "Object",
    "__WEBPACK_IMPORTED_MODULE_4__api_comment__",
    "then",
    "response",
    "code",
    "$ECode",
    "SUCCESS",
    "concat",
    "records",
    "setCommentList",
    "current",
    "size",
    "methods",
    "__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default",
    "__WEBPACK_IMPORTED_MODULE_5_vuex__",
    "handleCurrentChange",
    "val",
    "submitBox",
    "e",
    "_this2",
    "userUid",
    "content",
    "blogUid",
    "$notify",
    "title",
    "message",
    "type",
    "offset",
    "error",
    "_this3",
    "views_messageBoard",
    "render",
    "_vm",
    "_h",
    "$createElement",
    "_c",
    "_self",
    "staticClass",
    "_v",
    "attrs",
    "on",
    "submit-box",
    "_e",
    "staticRenderFns",
    "__vue_styles__",
    "ssrContext",
    "__webpack_require__",
    "Component",
    "normalizeComponent",
    "messageBoard"
  ],
  "mappings": "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",
  "file": "static/js/9.1e23fddfa203df18d884.js",
  "sourcesContent": [
    "<template>\r\n  <div>\r\n    <div class=\"pagebg sorts\"></div>\r\n    <div class=\"container\">\r\n<!--      <h1 class=\"t_nav\">-->\r\n<!--        <span>每个人都有自己故事，只是演绎的方式不同。</span>-->\r\n<!--        <a href=\"/\" class=\"n1\">网站首页</a>-->\r\n<!--        <a href=\"javascript:void(0);\" class=\"n2\">留言</a>-->\r\n<!--      </h1>-->\r\n\r\n      <CommentBox\r\n        :userInfo=\"userInfo\"\r\n        :commentInfo=\"commentInfo\"\r\n        @submit-box=\"submitBox\"\r\n        :showCancel=\"showCancel\"\r\n      ></CommentBox>\r\n\r\n      <div class=\"message_infos\">\r\n        <CommentList :comments=\"comments\" :commentInfo=\"commentInfo\"></CommentList>\r\n        <div class=\"noComment\" v-if=\"comments.length ==0\">还没有评论，快来抢沙发吧！</div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n    import CommentList from \"../components/CommentList\";\r\n    import CommentBox from \"../components/CommentBox\";\r\n    import Sticky from \"@/components/Sticky\";\r\n    import { addComment, getCommentList } from \"../api/comment\";\r\n\r\n    // vuex中有mapState方法，相当于我们能够使用它的getset方法\r\n    import { mapMutations } from \"vuex\";\r\n    export default {\r\n        data() {\r\n            return {\r\n                pageMinHeight: 0,\r\n                source: \"MESSAGE_BOARD\",\r\n                showCancel: false,\r\n                submitting: false,\r\n                value: \"\",\r\n                comments: [],\r\n                commentInfo: {\r\n                    // 评论来源： MESSAGE_BOARD，ABOUT，BLOG_INFO 等 代表来自某些页面的评论\r\n                    source: \"MESSAGE_BOARD\"\r\n                },\r\n                currentPage: 1,\r\n                pageSize: 10,\r\n                total: 0, //总数量\r\n                toInfo: {},\r\n                userInfo: {}\r\n            };\r\n        },\r\n        watch: {},\r\n        computed: {},\r\n        components: {\r\n            CommentList,\r\n            CommentBox,\r\n            Sticky\r\n        },\r\n        created() {\r\n            this.getCommentDataList();\r\n        },\r\n        mounted () {\r\n          var that = this;\r\n          // 屏幕的高度\r\n          this.pageMinHeight = window.innerHeight - 62\r\n          $(window).scroll(function () {\r\n            var docHeight = $(document).height(); // 获取整个页面的高度(不只是窗口,还包括为显示的页面)\r\n            var winHeight = $(window).height(); // 获取当前窗体的高度(显示的高度)\r\n            var winScrollHeight = $(window).scrollTop(); // 获取滚动条滚动的距离(移动距离)\r\n            //还有30像素的时候,就查询\r\n            if(docHeight == winHeight + winScrollHeight){\r\n              if(that.comments.length >= that.total) {\r\n                return;\r\n              }\r\n              let params = {};\r\n              params.source = \"MESSAGE_BOARD\";\r\n              params.currentPage = that.currentPage + 1\r\n              params.pageSize = that.pageSize;\r\n              getCommentList(params).then(response => {\r\n                if (response.code == that.$ECode.SUCCESS) {\r\n                  that.comments = that.comments.concat(response.data.records);\r\n                  that.setCommentList(this.comments);\r\n                  that.currentPage = response.data.current;\r\n                  that.pageSize = response.data.size;\r\n                  that.total = response.data.total;\r\n                }\r\n              });\r\n            }\r\n          })\r\n        },\r\n        methods: {\r\n            //拿到vuex中的写的两个方法\r\n            ...mapMutations([\"setCommentList\"]),\r\n            handleCurrentChange: function(val) {\r\n                this.currentPage = val;\r\n                this.getCommentDataList();\r\n            },\r\n            submitBox(e) {\r\n                let params = {};\r\n                params.source = e.source;\r\n                params.userUid = e.userUid;\r\n                params.content = e.content;\r\n                params.blogUid = e.blogUid;\r\n                addComment(params).then(response => {\r\n                    if (response.code == this.$ECode.SUCCESS) {\r\n                        this.$notify({\r\n                            title: \"成功\",\r\n                            message: \"发表成功~\",\r\n                            type: \"success\",\r\n                            offset: 100\r\n                        });\r\n                    } else {\r\n                        this.$notify.error({\r\n                            title: \"错误\",\r\n                            message: response.data,\r\n                            offset: 100\r\n                        });\r\n                    }\r\n                    this.getCommentDataList();\r\n                });\r\n            },\r\n            getCommentDataList: function() {\r\n                let params = {};\r\n                params.source = \"MESSAGE_BOARD\";\r\n                params.currentPage = this.currentPage;\r\n                params.pageSize = this.pageSize;\r\n                getCommentList(params).then(response => {\r\n                    if (response.code == this.$ECode.SUCCESS) {\r\n                        this.comments = response.data.records;\r\n                        this.setCommentList(this.comments);\r\n                        this.currentPage = response.data.current;\r\n                        this.pageSize = response.data.size;\r\n                        this.total = response.data.total;\r\n                    }\r\n                });\r\n            },\r\n        }\r\n    };\r\n</script>\r\n<style scoped>\r\n  .message_infos {\r\n    width: 100%;\r\n    min-height: 500px;\r\n    margin-left: 10px;\r\n  }\r\n  .noComment {\r\n    width: 100%;\r\n    text-align: center;\r\n  }\r\n  .page {\r\n    position: relative;\r\n  }\r\n  .block {\r\n    position: relative;\r\n    bottom: 0px;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/messageBoard.vue",
    "var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"pagebg sorts\"}),_vm._v(\" \"),_c('div',{staticClass:\"container\"},[_c('CommentBox',{attrs:{\"userInfo\":_vm.userInfo,\"commentInfo\":_vm.commentInfo,\"showCancel\":_vm.showCancel},on:{\"submit-box\":_vm.submitBox}}),_vm._v(\" \"),_c('div',{staticClass:\"message_infos\"},[_c('CommentList',{attrs:{\"comments\":_vm.comments,\"commentInfo\":_vm.commentInfo}}),_vm._v(\" \"),(_vm.comments.length ==0)?_c('div',{staticClass:\"noComment\"},[_vm._v(\"还没有评论，快来抢沙发吧！\")]):_vm._e()],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-ade8ec30\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/messageBoard.vue\n// module id = null\n// module chunks = ",
    "function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-ade8ec30\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./messageBoard.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./messageBoard.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./messageBoard.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ade8ec30\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./messageBoard.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-ade8ec30\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/messageBoard.vue\n// module id = null\n// module chunks = "
  ],
  "sourceRoot": ""
}