(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d2389cb"],{ffb7:function(t,e,s){"use strict";s.r(e);var a=s("8194"),i={data(){return{messageData:{},status:["未读","已读","回收站"],params:{pageNumber:1,pageSize:10,status:"UN_READY"},messageDelColumns:[{title:"消息标题",key:"title",align:"left",tooltip:!0},{title:"消息内容",key:"content",align:"left",tooltip:!0},{title:"发送时间",key:"createTime",align:"left",width:240}],messageColumns:[{title:"消息标题",key:"title",align:"left",tooltip:!0},{title:"消息内容",key:"content",align:"left",tooltip:!0},{title:"发送时间",key:"createTime",align:"left",width:240},{title:"操作",key:"action",align:"center",fixed:"right",width:150,render:(t,e)=>"UN_READY"===e.row.status?t("div",[t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:()=>{this.setRead(e.row.id)}}},"已读"),t("Button",{props:{size:"small",type:"error"},on:{click:()=>{this.removeMessage(e.row.id)}}},"删除")]):"ALREADY_READY"===e.row.status?t("div",[t("Button",{props:{size:"small",type:"error"},on:{click:()=>{this.removeMessage(e.row.id)}}},"删除")]):void 0}]}},methods:{statusChange(t){0===t&&(this.params.status="UN_READY"),1===t&&(this.params.status="ALREADY_READY"),2===t&&(this.params.status="ALREADY_REMOVE"),this.getList()},changePage(t){this.params.pageNumber=t,this.getList()},changePageSize(t){this.params.pageSize=t,this.getList()},getList(){Object(a.J)(this.params).then(t=>{t.success&&(this.messageData=t.result)})},setRead(t){Object(a.M)(t).then(t=>{t.success&&this.getList()})},removeMessage(t){this.$Modal.confirm({title:"确认删除",content:"确认要删除此消息?",loading:!0,onOk:()=>{Object(a.s)(t).then(t=>{this.$Modal.remove(),t.success&&(this.$Message.success("消息已成功放入回收站"),this.getList())})}})}},mounted(){this.getList()}},s=s("2877"),i=Object(s.a)(i,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{staticClass:"msg-list"},[e("card",{attrs:{_Title:"我的消息",_Tabs:t.status,_Size:16},on:{_Change:t.statusChange}}),"ALREADY_REMOVE"!=t.params.status?e("Table",{attrs:{columns:t.messageColumns,data:t.messageData.records}}):t._e(),"ALREADY_REMOVE"==t.params.status?e("Table",{attrs:{columns:t.messageDelColumns,data:t.messageData.records}}):t._e(),e("Page",{staticStyle:{float:"right","margin-top":"10px"},attrs:{current:t.params.pageNumber,total:t.messageData.total,"page-size":t.params.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)},[],!1,null,"3f0aa404",null);e.default=i.exports}}]);