(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-691ec31e"],{"84a9":function(t,e,s){"use strict";s.d(e,"b",function(){return a}),s.d(e,"c",function(){return r}),s.d(e,"e",function(){return i}),s.d(e,"g",function(){return n}),s.d(e,"f",function(){return c}),s.d(e,"a",function(){return l}),s.d(e,"d",function(){return d});var o=s("ff66");function a(t){return Object(o.d)({url:"/buyer/store/apply/first",needToken:!0,method:o.a.PUT,params:t})}function r(t){return Object(o.d)({url:"/buyer/store/apply/second",needToken:!0,method:o.a.PUT,params:t})}function i(t){return Object(o.d)({url:"/buyer/store/apply/third",needToken:!0,method:o.a.PUT,params:t})}function n(t){return Object(o.d)({url:"/buyer/store/get/detail/"+t,needToken:!0,method:o.a.GET})}function c(t){return Object(o.d)({url:"/buyer/store/label/get/"+t,needToken:!0,method:o.a.GET})}function l(){return Object(o.d)({url:"/buyer/article/type/STORE_REGISTER",needToken:!0,method:o.a.GET})}function d(){return Object(o.d)({url:"/buyer/store/apply",needToken:!0,method:o.a.GET})}},"9f83":function(t,e,s){"use strict";s.r(e);var o=s("84a9"),a=s("8194"),r=s("c40e"),i={name:"Merchant",data(){return{storeMsg:{},cateList:[],goodsList:[],total:0,params:{pageNumber:1,pageSize:20,keyword:"",storeId:this.$route.query.id,storeCatId:""},cateName:"店铺推荐",storeCollected:!1}},created(){this.getStoreMsg(),this.getCateList(),this.getGoodsList()},methods:{getStoreMsg(){Object(o.g)(this.$route.query.id).then(t=>{t.success&&(this.storeMsg=t.result,document.title=this.storeMsg.storeName,this.Cookies.getItem("userInfo")&&Object(a.H)("STORE",this.storeMsg.storeId).then(t=>{t.success&&t.result&&(this.storeCollected=!0)}))})},getCateList(){Object(o.f)(this.$route.query.id).then(t=>{t.success&&(this.cateList=t.result)})},getGoodsList(){Object(r.c)(this.params).then(t=>{t.success&&(this.goodsList=t.result.content,this.total=t.result.totalElements)}).catch(()=>{})},goGoodsDetail(t,e){e=this.$router.resolve({path:"/goodsDetail",query:{skuId:t,goodsId:e}});window.open(e.href,"_blank")},search(t){this.params.keyword=t,this.getGoodsList()},searchByCate(t){this.params.storeCatId=t.id,this.cateName=t.labelName,this.getGoodsList()},changePageNum(t){this.params.pageNumber=t,this.getGoodsList()},changePageSize(t){this.params.pageNumber=1,this.params.pageSize=t,this.getGoodsList()},async collect(){this.storeCollected?(await Object(a.k)("STORE",this.storeMsg.storeId)).success&&(this.$Message.success("已取消收藏"),this.storeCollected=!1):200===(await Object(a.o)("STORE",this.storeMsg.storeId)).code&&(this.storeCollected=!0,this.$Message.success("收藏店铺成功,可以前往个人中心我的收藏查看"))}}},s=(s("cefe"),s("2877")),i=Object(s.a)(i,function(){var s=this,t=s.$createElement,o=s._self._c||t;return o("div",{staticClass:"merchant"},[o("BaseHeader"),o("Search",{attrs:{store:!0},on:{search:s.search}}),o("div",{staticClass:"shop-logo"},[o("div",[o("img",{attrs:{src:s.storeMsg.storeLogo,height:"80",alt:""}}),o("div",[o("p",[s._v(s._s(s.storeMsg.storeName||"xx店铺"))]),o("p",{staticClass:"ellipsis",attrs:{alt:s.storeMsg.storeDesc},domProps:{innerHTML:s._s(s.storeMsg.storeDesc)}})]),o("div",[o("span",{staticClass:"hover-pointer",on:{click:s.collect}},[o("Icon",{attrs:{type:"ios-heart",color:s.storeCollected?"#ed3f14":"#fff"}}),s._v(s._s(s.storeCollected?"已收藏店铺":"收藏店铺"))],1),o("span",{staticClass:"hover-pointer ml_10",staticStyle:{width:"80px"},on:{click:function(t){return s.connectCs(s.storeMsg.yzfSign)}}},[o("Icon",{attrs:{custom:"icomoon icon-customer-service"}}),s._v("联系客服")],1)])])]),o("div",{staticClass:"store-category"},[o("ul",{staticClass:"cate-list"},[o("li",{staticClass:"cate-item",on:{click:function(t){return s.searchByCate({id:"",labelName:"店铺推荐"})}}},[s._v("首页")]),s._l(s.cateList,function(e,t){return o("li",{key:t,staticClass:"cate-item"},[e.children.length?o("Dropdown",[o("div",{on:{click:function(t){return t.target!==t.currentTarget?null:s.searchByCate(e)}}},[s._v(s._s(e.labelName)+" "),o("Icon",{attrs:{type:"ios-arrow-down"}})],1),o("DropdownMenu",{attrs:{slot:"list"},slot:"list"},s._l(e.children,function(e){return o("DropdownItem",{key:e.id,attrs:{name:e.id},nativeOn:{click:function(t){return s.searchByCate(e)}}},[s._v(s._s(e.labelName))])}),1)],1):o("span",{on:{click:function(t){return t.target!==t.currentTarget?null:s.searchByCate(e)}}},[s._v(s._s(e.labelName))])],1)})],2)]),o("div",{staticClass:"promotion-decorate"},[s._v(s._s(s.cateName))]),o("div",{staticClass:"goods-list"},[0===s.goodsList.length?o("empty"):s._l(s.goodsList,function(e,t){return o("div",{key:t,staticClass:"goods-show-info",on:{click:function(t){return s.goGoodsDetail(e.content.id,e.content.goodsId)}}},[o("div",{staticClass:"goods-show-img"},[o("img",{attrs:{width:"220",height:"220",src:e.content.thumbnail}})]),o("div",{staticClass:"goods-show-price"},[o("span",[o("span",{staticClass:"seckill-price text-danger"},[s._v(s._s(s._f("unitPrice")(e.content.price,"￥")))])])]),o("div",{staticClass:"goods-show-detail"},[o("span",[s._v(s._s(e.content.goodsName))])]),o("div",{staticClass:"goods-show-num"},[s._v(" 已有"),o("span",[s._v(s._s(e.content.commentNum||0))]),s._v("人评价 ")])])})],2),o("div",{staticClass:"goods-page"},[o("Page",{attrs:{"show-sizer":"",total:s.total,"page-size":s.params.pageSize},on:{"on-change":s.changePageNum,"on-page-size-change":s.changePageSize}})],1),o("BaseFooter")],1)},[],!1,null,"7a0dea34",null);e.default=i.exports},cefe:function(t,e,s){"use strict";s("eb3c")},eb3c:function(t,e,s){}}]);