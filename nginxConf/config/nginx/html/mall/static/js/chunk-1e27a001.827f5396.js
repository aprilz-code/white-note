(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1e27a001"],{"351e":function(t,e,s){"use strict";s.r(e);var a=s("8194"),r=s("f8b7"),i=s("9243"),l={name:"aftersale-detail",data(){return{afterSale:{},logList:[],reasonList:[],afterSaleStatusList:i.a,companyList:[],logisticsShow:!1,form:{afterSaleSn:"",logisticsId:"",logisticsNo:"",mDeliverTime:""},rules:{logisticsId:[{required:!0,message:"请选择物流公司"}],logisticsNo:[{required:!0,message:"请填写物流编号"}],mDeliverTime:[{required:!0,message:"请选择发货时间"}]},submitLoading:!1}},methods:{getDetail(){Object(a.b)(this.$route.query.sn).then(t=>{if(t.success){this.afterSale=t.result,this.afterSale.serviceName=this.filterOrderStatus(this.afterSale.serviceStatus);const e=new RegExp("[0-9]+");e.test(this.afterSale.reason)?this.getReason(this.afterSale.serviceType):this.$set(this.afterSale,"reasonName",this.afterSale.reason)}})},getReason(t){Object(a.f)(t).then(t=>{t.success&&(this.reasonList=t.result,this.reasonList.forEach(t=>{t.id===this.afterSale.reason&&this.$set(this.afterSale,"reasonName",t.reason)}))})},getLog(){Object(a.e)(this.$route.query.sn).then(t=>{this.logList=t.result})},filterOrderStatus(e){var t=this.afterSaleStatusList.filter(t=>t.status===e);if(t.length)return t[0].name},perviewImg(t){window.open(t,"_blank")},cancel(t){this.$Modal.confirm({title:"取消",content:"<p>确定取消此次售后申请吗？</p>",onOk:()=>{Object(a.j)(t).then(t=>{t.success&&(this.$Message.success("取消售后申请成功"),this.getDetail())})},onCancel:()=>{}})},getCompany(){Object(r.f)().then(t=>{t.success&&(this.companyList=t.result)})},submitDelivery(){this.submitLoading=!0,Object(r.a)(this.form).then(t=>{t.success&&(this.logisticsShow=!1,this.$Message.success("提交成功"),this.getDetail()),this.submitLoading=!1}).catch(()=>{this.submitLoading=!1})},openModal(){this.form.afterSaleSn=this.afterSale.sn,this.logisticsShow=!0,this.$refs.form.resetFields(),this.companyList.length||this.getCompany()},changeTime(t){this.form.mDeliverTime=t}},mounted(){this.getDetail(),this.getLog()}},s=(s("6923"),s("2877")),l=Object(s.a)(l,function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"order-detail"},[a("card",{attrs:{_Title:"售后详情",_Size:16}}),"PASS"==s.afterSale.serviceStatus&&"RETURN_MONEY"!=s.afterSale.serviceType||s.afterSale.afterSaleAllowOperationVO&&s.afterSale.afterSaleAllowOperationVO.cancel?a("Card",{staticClass:"mb_10"},["PASS"==s.afterSale.serviceStatus&&"RETURN_MONEY"!=s.afterSale.serviceType?a("Button",{attrs:{type:"success",size:"small"},on:{click:s.openModal}},[s._v("提交物流")]):s._e(),s.afterSale.afterSaleAllowOperationVO&&s.afterSale.afterSaleAllowOperationVO.cancel?a("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return s.cancel(s.afterSale.sn)}}},[s._v("取消售后")]):s._e()],1):s._e(),a("div",{staticClass:"order-card"},[a("h3",[s._v(s._s(s.afterSale.serviceName))]),a("p",{staticClass:"global_color fontsize_18"},[s._v(s._s(s.afterSale.orderStatusValue))]),a("p",[s._v("售后单号："+s._s(s.afterSale.sn)+" 订单号："+s._s(s.afterSale.orderSn))]),a("div",{staticClass:"operation-time",staticStyle:{color:"#999"}},[s._v("创建时间："+s._s(s.afterSale.createTime))]),a("div",{staticClass:"service-after"},[a("div",[s._v(" 本次售后服务由"),a("span",[s._v(s._s(s.afterSale.storeName))]),s._v("为您提供 ")]),a("div",[a("img",{attrs:{src:s.afterSale.goodsImage,alt:"",width:"60",height:"60"}}),a("span",[s._v(s._s(s.afterSale.goodsName))])])])]),a("div",{staticClass:"order-card"},[a("h3",[s._v("售后进程")]),a("Steps",{staticClass:"progress",attrs:{current:s.logList.length,direction:"vertical"}},s._l(s.logList,function(t,e){return a("Step",{key:e,attrs:{content:"操作人："+t.operatorName+"   "+t.createTime,title:t.message}})}),1)],1),a("div",{staticClass:"order-card"},[a("h3",{staticClass:"mb_10"},[s._v("服务单信息")]),a("table",{attrs:{border:"1",cellpadding:"0",cellspacing:"0"}},[a("tr",[a("td",[s._v("退款方式")]),a("td",[s._v(s._s("ORIGINAL"==s.afterSale.refundWay?"原路退回":"账号退款"))])]),a("tr",[a("td",[s._v("申请退款金额")]),a("td",[s._v(s._s(s._f("unitPrice")(s.afterSale.applyRefundPrice,"￥")))])]),s.afterSale.actualRefundPrice?a("tr",[a("td",[s._v("实际退款金额")]),a("td",[s._v(s._s(s._f("unitPrice")(s.afterSale.actualRefundPrice,"￥")))])]):s._e(),"OFFLINE"===s.afterSale.refundWay?[a("tr",[a("td",[s._v("退款开户行")]),a("td",[s._v(s._s(s.afterSale.bankDepositName))])]),a("tr",[a("td",[s._v("退款开户名")]),a("td",[s._v(s._s(s.afterSale.bankAccountName))])]),a("tr",[a("td",[s._v("退款卡号")]),a("td",[s._v(s._s(s.afterSale.bankAccountNumber))])])]:s._e(),a("tr",[a("td",[s._v("商品处理方式")]),a("td",[s._v(s._s("RETURN_MONEY"==s.afterSale.serviceType?"退款":"退货"))])]),a("tr",[a("td",[s._v("退款原因")]),a("td",[s._v(s._s(s.afterSale.reasonName))])]),a("tr",[a("td",[s._v("问题描述")]),a("td",[s._v(s._s(s.afterSale.problemDesc))])])],2)]),s.afterSale.afterSaleImage?a("div",{staticClass:"order-card"},[a("h3",{staticClass:"mb_10"},[s._v("图片信息")]),s._l(s.afterSale.afterSaleImage.split(","),function(e){return a("div",{key:e},[a("img",{staticClass:"hover-pointer",attrs:{src:e,width:"200",height:"200",alt:""},on:{click:function(t){return s.perviewImg(e)}}})])})],2):s._e(),a("Modal",{attrs:{width:"530"},model:{value:s.logisticsShow,callback:function(t){s.logisticsShow=t},expression:"logisticsShow"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[s._v("提交物流信息")])]),a("div",[a("Form",{ref:"form",attrs:{model:s.form,"label-position":"left","label-width":100,rules:s.rules}},[a("FormItem",{attrs:{label:"物流公司",prop:"logisticsId"}},[a("Select",{attrs:{placeholder:"请选择物流公司"},model:{value:s.form.logisticsId,callback:function(t){s.$set(s.form,"logisticsId",t)},expression:"form.logisticsId"}},s._l(s.companyList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[s._v(s._s(t.name))])}),1)],1),a("FormItem",{attrs:{label:"快递单号",prop:"logisticsNo"}},[a("Input",{attrs:{placeholder:"请填写快递单号"},model:{value:s.form.logisticsNo,callback:function(t){s.$set(s.form,"logisticsNo",t)},expression:"form.logisticsNo"}})],1),a("FormItem",{attrs:{label:"发货时间",prop:"mDeliverTime"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"选择发货时间"},on:{"on-change":s.changeTime},model:{value:s.form.mDeliverTime,callback:function(t){s.$set(s.form,"mDeliverTime",t)},expression:"form.mDeliverTime"}})],1)],1)],1),a("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:function(t){s.logisticsShow=!1}}},[s._v("关闭")]),a("Button",{attrs:{type:"primary",loading:s.submitLoading},on:{click:s.submitDelivery}},[s._v("提交")])],1)])],1)},[],!1,null,"6565f980",null);e.default=l.exports},6923:function(t,e,s){"use strict";s("dda8")},9243:function(t,e,s){"use strict";s.d(e,"b",function(){return a}),s.d(e,"a",function(){return r});const a=[{name:"全部",status:"ALL"},{name:"未付款",status:"UNPAID"},{name:"已付款",status:"PAID"},{name:"待发货",status:"UNDELIVERED"},{name:"已发货",status:"DELIVERED"},{name:"已完成",status:"COMPLETED"},{name:"待核验",status:"TAKE"},{name:"已取消",status:"CANCELLED"}],r=[{name:"申请中",status:"APPLY"},{name:"通过",status:"PASS"},{name:"拒绝",status:"REFUSE"},{name:"买家退货，待卖家收货",status:"BUYER_RETURN"},{name:"卖家确认收货",status:"SELLER_CONFIRM"},{name:"卖家终止售后",status:"SELLER_TERMINATION"},{name:"买家确认收货",status:"BUYER_CONFIRM"},{name:"买家取消售后",status:"BUYER_CANCEL"},{name:"完成售后",status:"COMPLETE"},{name:"等待平台退款",status:"WAIT_REFUND"}]},dda8:function(t,e,s){}}]);
