(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-eb3cb960"],{"30c4":function(e,t,a){"use strict";a.r(t);var s=a("f8b7"),r=a("8194"),n=a("9243"),i={name:"MyOrder",props:{homePage:{type:Boolean,default:!1}},data(){return{orderList:[],params:{pageNumber:1,pageSize:10,keywords:"",tag:"ALL"},cancelParams:{orderSn:"",reason:""},orderStatusList:n.b,changeWay:["全部订单","待付款","待收货","已完成"],total:0,spinShow:!1,afterSaleModal:!1,afterSaleColumns:[{title:"商品名称",key:"name"},{title:"价格",key:"goodsPrice"}],afterSaleArr:[],cancelAvail:!1,cancelReason:[]}},mounted(){this.homePage&&(this.params.pageSize=5),this.getList()},methods:{goodsDetail(e,t){t=this.$router.resolve({path:"/goodsDetail",query:{skuId:e,goodsId:t}});window.open(t.href,"_blank")},change(e){switch(e){case 0:this.params.tag="ALL";break;case 1:this.params.tag="WAIT_PAY";break;case 2:this.params.tag="WAIT_ROG";break;case 3:this.params.tag="COMPLETE"}this.getList()},shopPage(e){e=this.$router.resolve({path:"/Merchant",query:{id:e}});window.open(e.href,"_blank")},orderDetail(e){this.$router.push({name:"OrderDetail",query:{sn:e}})},received(e){Object(s.j)(e).then(e=>{e.success&&(this.$Message.success("确认收货成功"),this.getList())})},goPay(e){this.$router.push({path:"/payment",query:{orderType:"ORDER",sn:e}})},applyAfterSale(e){let t=[];e.forEach(e=>{"NOT_APPLIED"===e.afterSaleStatus&&t.push(e)}),1===t.length?this.$router.push({name:"ApplyAfterSale",query:{sn:t[0].sn}}):(this.afterSaleArr=t,this.afterSaleModal=!0)},afterSaleSelect(e){this.$router.push({name:"ApplyAfterSale",query:{sn:e.sn}})},comment(e,t){this.$router.push({path:"/home/addEval",query:{sn:e,index:t}})},complain(e,t){this.$router.push({name:"Complain",query:{sn:e,index:t}})},delOrder(e){this.$Modal.confirm({title:"删除订单",content:"<p>确认删除当前订单吗？</p>",onOk:()=>{Object(s.d)(e).then(e=>{e.success&&(this.$Message.success("删除成功"),this.getList())})},onCancel:()=>{}})},getList(){this.spinShow=!0;let e=JSON.parse(JSON.stringify(this.params));"ALL"===e.orderStatus&&delete e.orderStatus,Object(s.g)(e).then(e=>{this.spinShow=!1,e.success&&(this.orderList=e.result.records,this.total=e.result.total)})},changePageNum(e){this.params.pageNumber=e,this.getList()},changePageSize(e){this.params.pageNumber=1,this.params.pageSize=e,this.getList()},handleCancelOrder(e){this.cancelParams.orderSn=e,Object(r.f)("CANCEL").then(e=>{e.success&&(this.cancelReason=e.result,this.cancelAvail=!0,this.cancelParams.reason=this.cancelReason[0].reason)})},sureCancel(){Object(s.b)(this.cancelParams).then(e=>{e.success&&(this.$Message.success("取消订单成功"),this.getList(),this.cancelAvail=!1)})},filterOrderStatus(t){return this.orderStatusList.filter(e=>e.status===t)[0].name}}},a=(a("8901"),a("2877")),i=Object(a.a)(i,function(){var r=this,e=r.$createElement,n=r._self._c||e;return n("div",{staticClass:"wrapper"},[r.homePage?n("card",{attrs:{_Title:"我的订单",_Size:16,_Tabs:r.changeWay,_More:"全部订单",_Src:"/home/MyOrder"},on:{_Change:r.change}}):n("card",{attrs:{_Title:"我的订单",_Size:16,_Tabs:r.changeWay},on:{_Change:r.change}}),r.homePage?r._e():n("div",{staticClass:"mb_20 box"},[n("div",{staticClass:"global_float_right"},[n("Input",{staticClass:"width_300",attrs:{search:"","enter-button":"",placeholder:"请输入订单号搜索"},on:{"on-search":r.getList},model:{value:r.params.keywords,callback:function(e){r.$set(r.params,"keywords",e)},expression:"params.keywords"}})],1)]),0===r.orderList.length?n("empty"):n("div",{staticClass:"order-content"},[r._l(r.orderList,function(s,e){return n("div",{key:e,staticClass:"order-list"},[n("div",{staticClass:"order-header"},[n("div",[n("div",[r._v(r._s(r.filterOrderStatus(s.orderStatus)))]),n("div",[r._v(" 订单号："+r._s(s.sn)+"   "+r._s(s.createTime)+" ")])]),n("div",[n("Button",{staticClass:"del-btn mr_10 fontsize_16",staticStyle:{"margin-top":"-5px"},attrs:{type:"text",icon:"ios-trash-outline",size:"small"},on:{click:function(e){return r.delOrder(s.sn)}}}),n("span",[r._v(r._s(r._f("unitPrice")(s.flowPrice,"￥")))])],1)]),n("div",{staticClass:"order-body"},[n("div",{staticClass:"goods-list"},r._l(s.orderItems,function(t,a){return n("div",{key:a},[n("img",{staticClass:"hover-color",attrs:{src:t.image,alt:""},on:{click:function(e){return r.goodsDetail(t.skuId,t.goodsId)}}}),n("div",[n("div",{staticClass:"hover-color",on:{click:function(e){return r.goodsDetail(t.skuId,t.goodsId)}}},[r._v(r._s(t.name))]),n("div",{staticClass:"mt_10"},[n("span",{staticClass:"global_color"},[r._v(r._s(r._f("unitPrice")(t.goodsPrice,"￥"))+" ")]),r._v("x "+r._s(t.num)+" ")]),"UNFINISHED"==t.commentStatus?n("Button",{staticClass:"fontsize_12",staticStyle:{position:"relative",top:"-22px",left:"100px"},attrs:{size:"small",type:"success"},on:{click:function(e){return r.comment(s.sn,a)}}},[r._v("评价")]):r._e(),"NO_APPLY"==t.complainStatus?n("Button",{staticClass:"fontsize_12",staticStyle:{position:"relative",top:"-22px",left:"100px"},attrs:{type:"warning",size:"small"},on:{click:function(e){return r.complain(s.sn,a)}}},[r._v("投诉")]):r._e()],1)])}),0),n("div",[n("span",{on:{click:function(e){return r.shopPage(s.storeId)}}},[r._v(r._s(s.storeName))])]),n("div",[n("Button",{attrs:{type:"info",size:"small"},on:{click:function(e){return r.orderDetail(s.sn)}}},[r._v("订单详情")]),s.allowOperationVO.cancel?n("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return r.handleCancelOrder(s.sn)}}},[r._v("取消订单")]):r._e(),s.allowOperationVO.pay?n("Button",{attrs:{size:"small",type:"success"},on:{click:function(e){return r.goPay(s.sn)}}},[r._v("去支付")]):r._e(),s.allowOperationVO.rog?n("Button",{attrs:{size:"small",type:"warning"},on:{click:function(e){return r.received(s.sn)}}},[r._v("确认收货")]):r._e(),s.groupAfterSaleStatus.includes("NOT_APPLIED")?n("Button",{attrs:{size:"small"},on:{click:function(e){return r.applyAfterSale(s.orderItems)}}},[r._v("申请售后")]):r._e()],1)])])}),r.spinShow?n("Spin",{attrs:{size:"large",fix:""}}):r._e()],2),r.homePage?r._e():n("div",{staticClass:"page-size"},[n("Page",{attrs:{total:r.total,"page-size":r.params.pageSize,"show-total":"","show-sizer":""},on:{"on-change":r.changePageNum,"on-page-size-change":r.changePageSize}})],1),n("Modal",{attrs:{title:"请选择申请售后的商品"},model:{value:r.afterSaleModal,callback:function(e){r.afterSaleModal=e},expression:"afterSaleModal"}},[n("div",[n("Table",{attrs:{border:"",columns:r.afterSaleColumns,data:r.afterSaleArr},on:{"on-row-click":r.afterSaleSelect}})],1),n("div",{attrs:{slot:"footer"},slot:"footer"})]),n("Modal",{attrs:{title:"请选择取消订单原因"},on:{"on-ok":r.sureCancel,"on-cancel":function(e){r.cancelAvail=!1}},model:{value:r.cancelAvail,callback:function(e){r.cancelAvail=e},expression:"cancelAvail"}},[n("RadioGroup",{attrs:{vertical:"",type:"button","button-style":"solid"},model:{value:r.cancelParams.reason,callback:function(e){r.$set(r.cancelParams,"reason",e)},expression:"cancelParams.reason"}},r._l(r.cancelReason,function(e){return n("Radio",{key:e.id,attrs:{label:e.reason}},[r._v(" "+r._s(e.reason)+" ")])}),1)],1)],1)},[],!1,null,"07f7b3b6",null);t.default=i.exports},8901:function(e,t,a){"use strict";a("ca88")},9243:function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"a",function(){return r});const s=[{name:"全部",status:"ALL"},{name:"未付款",status:"UNPAID"},{name:"已付款",status:"PAID"},{name:"待发货",status:"UNDELIVERED"},{name:"已发货",status:"DELIVERED"},{name:"已完成",status:"COMPLETED"},{name:"待核验",status:"TAKE"},{name:"已取消",status:"CANCELLED"}],r=[{name:"申请中",status:"APPLY"},{name:"通过",status:"PASS"},{name:"拒绝",status:"REFUSE"},{name:"买家退货，待卖家收货",status:"BUYER_RETURN"},{name:"卖家确认收货",status:"SELLER_CONFIRM"},{name:"卖家终止售后",status:"SELLER_TERMINATION"},{name:"买家确认收货",status:"BUYER_CONFIRM"},{name:"买家取消售后",status:"BUYER_CANCEL"},{name:"完成售后",status:"COMPLETE"},{name:"等待平台退款",status:"WAIT_REFUND"}]},ca88:function(e,t,a){}}]);
