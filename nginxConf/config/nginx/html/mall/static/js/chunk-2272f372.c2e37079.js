(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2272f372"],{"27d8":function(e,t,s){"use strict";s("baef")},3815:function(e,t,s){"use strict";s.r(t);var r=s("7dfd"),i=s("be72"),a=s("7ded"),o=s("2934"),n={name:"ForgetPassword",components:{Verify:s("6402").a},data(){return{config:s("f121"),loading:!1,loading1:!1,formFirst:{mobile:"",code:""},form:{password:"",oncePasd:""},year:(new Date).getFullYear(),step:0,ruleInline:{mobile:[{required:!0,message:"请输入手机号码"},{pattern:r.mobile,trigger:"blur",message:"请输入正确的手机号"}],code:[{required:!0,message:"请输入手机验证码"}],password:[{required:!0,message:"密码不能为空"},{pattern:r.password,message:"密码不能少于6位"}]},verifyStatus:!1,verifyType:"FIND_USER",codeMsg:"发送验证码",interval:"",time:60}},methods:{next(){this.$refs.formFirst.validate(e=>{e&&(this.loading=!0,e=JSON.parse(JSON.stringify(this.formFirst)),a.g(e).then(e=>{this.loading=!1,e.success?this.step=1:this.$Message.warning(e.message)}).catch(()=>{this.loading=!1}))})},handleSubmit(){this.$refs.form.validate(e=>{if(e){let e=JSON.parse(JSON.stringify(this.form));e.password===e.oncePasd?(e.mobile=this.formFirst.mobile,e.password=Object(i.md5)(e.password),delete e.oncePasd,this.loading1=!0,a.e(e).then(e=>{this.loading1=!1,e.success&&(this.$Message.success("修改密码成功"),this.$router.push("login"))}).catch(()=>{this.loading=!1})):this.$Message.warning("两次输入密码不一致")}})},sendCode(){var e;60===this.time&&(""!==this.formFirst.mobile?this.verifyStatus?(e={mobile:this.formFirst.mobile,verificationEnums:"FIND_USER"},Object(o.e)(e).then(e=>{if(e.success){this.$Message.success("验证码发送成功");let e=this;this.interval=setInterval(()=>{e.time--,0===e.time?(e.time=60,e.codeMsg="重新发送",e.verifyStatus=!1,clearInterval(e.interval)):e.codeMsg=e.time},1e3)}else this.$Message.warning(e.message)})):this.$Message.warning("请先完成安全验证"):this.$Message.warning("请先填写手机号"))},verifyChange(e){e.status&&(this.$refs.verify.show=!1,this.verifyStatus=!0)},verifyBtnClick(){this.verifyStatus||this.$refs.verify.init()}},mounted(){document.querySelector(".forget-password").style.height=window.innerHeight+"px",this.$refs.formFirst.resetFields()},watch:{}},l=(s("27d8"),s("2877")),n=Object(l.a)(n,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{staticClass:"forget-password",on:{click:function(e){t.$refs.verify.show=!1}}},[e("div",{staticStyle:{height:"50px"}}),e("div",{staticClass:"logo-box"},[e("img",{attrs:{src:t.$store.state.logoImg,width:"150"},on:{click:function(e){return t.$router.push("/")}}}),e("div",[t._v("修改密码")])]),e("div",{staticClass:"login-container"},[e("Form",{directives:[{name:"show",rawName:"v-show",value:0===t.step,expression:"step === 0"}],ref:"formFirst",staticStyle:{width:"300px"},attrs:{model:t.formFirst,rules:t.ruleInline}},[e("FormItem",{attrs:{prop:"mobile"}},[e("i-input",{attrs:{type:"text",clearable:"",placeholder:"手机号"},model:{value:t.formFirst.mobile,callback:function(e){t.$set(t.formFirst,"mobile",e)},expression:"formFirst.mobile"}},[e("Icon",{attrs:{slot:"prepend",type:"md-phone-portrait"},slot:"prepend"})],1)],1),e("FormItem",{attrs:{prop:"code"}},[e("i-input",{attrs:{type:"text",clearable:"",placeholder:"手机验证码"},model:{value:t.formFirst.code,callback:function(e){t.$set(t.formFirst,"code",e)},expression:"formFirst.code"}},[e("Icon",{staticStyle:{"font-weight":"bold"},attrs:{slot:"prepend",type:"ios-text-outline"},slot:"prepend"}),e("Button",{attrs:{slot:"append"},on:{click:t.sendCode},slot:"append"},[t._v(t._s(t.codeMsg))])],1)],1),e("FormItem",[e("Button",{attrs:{long:"",type:t.verifyStatus?"success":"default"},on:{click:t.verifyBtnClick}},[t._v(t._s(t.verifyStatus?"验证通过":"点击完成安全验证"))])],1),e("FormItem",[e("Button",{attrs:{type:"error",loading:t.loading,long:""},on:{click:t.next}},[t._v("下一步")])],1)],1),e("Form",{directives:[{name:"show",rawName:"v-show",value:1===t.step,expression:"step === 1"}],ref:"form",staticStyle:{width:"300px"},attrs:{model:t.form,rules:t.ruleInline}},[e("FormItem",{attrs:{prop:"password"}},[e("i-input",{attrs:{type:"password",clearable:"",placeholder:"请输入至少六位密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}},[e("Icon",{attrs:{slot:"prepend",type:"md-lock"},slot:"prepend"})],1)],1),e("FormItem",{attrs:{prop:"password"}},[e("i-input",{attrs:{type:"password",clearable:"",placeholder:"请再次输入密码"},model:{value:t.form.oncePasd,callback:function(e){t.$set(t.form,"oncePasd",e)},expression:"form.oncePasd"}},[e("Icon",{attrs:{slot:"prepend",type:"md-lock"},slot:"prepend"})],1)],1),e("FormItem",[e("Button",{attrs:{type:"error",size:"large",loading:t.loading1,long:""},on:{click:t.handleSubmit}},[t._v("提交")])],1)],1),e("Verify",{ref:"verify",staticClass:"verify-con",attrs:{verifyType:t.verifyType},on:{change:t.verifyChange}}),e("div",{staticClass:"login-btn"},[e("a",{on:{click:function(e){return t.$router.push("login")}}},[t._v("前往登录")])])],1),e("div",{staticClass:"foot"},[e("Row",{staticClass:"help",attrs:{type:"flex",justify:"space-around"}},[e("a",{staticClass:"item",attrs:{href:"https://pickmall.cn/",target:"_blank"}},[t._v("帮助")]),e("a",{staticClass:"item",attrs:{href:"https://pickmall.cn/",target:"_blank"}},[t._v("隐私")]),e("a",{staticClass:"item",attrs:{href:"https://pickmall.cn/",target:"_blank"}},[t._v("条款")])]),e("Row",{staticClass:"copyright",attrs:{type:"flex",justify:"center"}},[t._v(" Copyright © "+t._s(t.year)+" - Present "),e("a",{staticStyle:{margin:"0 5px"},attrs:{href:"https://pickmall.cn/",target:"_blank"}},[t._v(t._s(t.config.title))]),t._v(" 版权所有 ")])],1)])},[],!1,null,"58a7f199",null);t.default=n.exports},baef:function(e,t,s){}}]);