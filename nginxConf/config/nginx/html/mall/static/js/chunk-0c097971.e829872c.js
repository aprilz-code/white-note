(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0c097971"],{"4eca":function(t,s,i){"use strict";i.r(s);var e=i("c106"),a=i("86bd"),o=i("2166"),c=i("f74c"),a={name:"PointGoodsDetail",beforeRouteEnter(t,s,i){window.scrollTo(0,0),i()},created(){this.getGoodsDetail()},mounted(){window.addEventListener("scroll",this.handleScroll)},data(){return{goodsMsg:{},goodsSku:{},isLoading:!1,categoryBar:[],onceFlag:!0,count:1,loading:!1}},methods:{getGoodsDetail(){this.isLoading=!0,Object(c.c)(this.$route.query.id).then(t=>{this.isLoading=!1,t.success?(this.goodsMsg=t.result,this.goodsSku=t.result.goodsSku):(this.$Message.error(t.message),this.$router.push("/"))}).catch(()=>{this.$router.push("/")})},pointBuy(){const s={num:this.count,skuId:this.goodsMsg.skuId,cartType:"POINTS"};this.loading=!0,Object(o.a)(s).then(t=>{this.loading=!1,t.success?this.$router.push({path:"/pay",query:{way:s.cartType}}):this.$Message.warning(t.message)}).catch(()=>{this.loading=!1})},handleScroll(){this.onceFlag&&(this.$nextTick(()=>{this.changeHeight()}),this.onceFlag=!1)},changeHeight(){let t=document.querySelector(".item-intro"),s=window.getComputedStyle(t).height;s=parseInt(s.substr(0,s.length-2))+89,this.$refs.itemIntroGoods.style.height=s+"px"}},components:{Search:e.a,PicZoom:a.a}},i=(i("e50b"),i("2877")),a=Object(i.a)(a,function(){var s=this,t=s.$createElement,t=s._self._c||t;return t("div",{staticStyle:{background:"#fff"}},[t("BaseHeader"),t("Search",{staticStyle:{"border-bottom":"2px solid red"}}),t("div",{staticClass:"base-width cate-container"},[t("Breadcrumb",[t("BreadcrumbItem",{attrs:{to:"/"}},[s._v("首页")]),t("BreadcrumbItem",[s._v(s._s(s.goodsMsg.pointsGoodsCategoryName))])],1)],1),t("div",{staticClass:"item-detail-show"},[t("div",{staticClass:"item-detail-left"},[t("div",{staticClass:"item-detail-big-img"},[s.goodsSku.thumbnail?t("pic-zoom",{attrs:{url:s.goodsSku.thumbnail,scale:2}}):s._e()],1),t("div",{staticClass:"item-detail-img-row"},[t("div",{staticClass:"item-detail-img-small"},[t("img",{attrs:{src:s.goodsSku.thumbnail}})])])]),t("div",{staticClass:"item-detail-right"},[t("div",{staticClass:"item-detail-title"},[t("p",[s._v(s._s(s.goodsSku.goodsName))])]),t("div",{staticClass:"sell-point"},[s._v(" "+s._s(s.goodsSku.sellingPoint)+" ")]),t("div",{staticClass:"item-detail-price-row"},[t("div",{staticClass:"item-price-left"},[t("div",{staticClass:"item-price-row"},[t("p",[t("span",{staticClass:"item-price-title"},[s._v("积     分")]),t("span",{staticClass:"item-price"},[s._v(s._s(s.goodsMsg.points))])])])])]),t("div",{staticClass:"add-buy-car-box"},[t("div",{staticClass:"item-select"},[s._m(0),t("div",{staticClass:"item-select-row"},[t("InputNumber",{attrs:{min:1,disabled:0===s.goodsSku.quantity},model:{value:s.count,callback:function(t){s.count=t},expression:"count"}}),t("span",{staticClass:"inventory"},[s._v(" 库存"+s._s(s.goodsSku.quantity))])],1)]),"VIRTUAL_GOODS"!==s.goodsSku.goodsType&&0!==s.goodsSku.weight?t("div",{staticClass:"item-select"},[s._m(1),t("div",{staticClass:"item-select-row"},[t("span",{staticClass:"inventory"},[s._v(" "+s._s(s.goodsSku.weight)+"kg")])])]):s._e(),t("div",{staticClass:"add-buy-car"},[t("Button",{attrs:{type:"error",loading:s.loading,disabled:0===s.goodsSku.quantity},on:{click:s.pointBuy}},[s._v("积分购买")])],1)])])]),t("div",{ref:"itemIntroGoods",staticClass:"base-width item-intro"},[t("div",[s._v("商品介绍")]),s.goodsSku.intro?t("div",{staticClass:"mt_10 ml_10",domProps:{innerHTML:s._s(s.goodsSku.intro)}}):t("div",{staticStyle:{margin:"20px"}},[s._v("暂无商品介绍")])]),s.isLoading?t("Spin",{attrs:{size:"large",fix:""}}):s._e(),t("BaseFooter")],1)},[function(){var t=this,s=t.$createElement,s=t._self._c||s;return s("div",{staticClass:"item-select-title"},[s("p",[t._v("数量")])])},function(){var t=this,s=t.$createElement,s=t._self._c||s;return s("div",{staticClass:"item-select-title"},[s("p",[t._v("重量")])])}],!1,null,"491cd700",null);s.default=a.exports},"5a4a":function(t,s,i){},e50b:function(t,s,i){"use strict";i("5a4a")}}]);