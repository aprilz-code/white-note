(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-34364a38"],{a76d:function(e,r,t){"use strict";t("e897")},e897:function(e,r,t){},fdb6:function(e,r,t){"use strict";t.r(r);var s=t("f8b7"),a=t("8194"),o={name:"order-detail",data(){return{order:{},progressList:[],logistics:"",cancelParams:{orderSn:"",reason:""},cancelAvail:!1,cancelReason:[]}},methods:{goodsDetail(e,r){r=this.$router.resolve({path:"/goodsDetail",query:{skuId:e,goodsId:r}});window.open(r.href,"_blank")},shopPage(e){e=this.$router.resolve({path:"/Merchant",query:{id:e}});window.open(e.href,"_blank")},getDetail(){Object(s.i)(this.$route.query.sn).then(e=>{e.success&&(this.order=e.result,this.progressList=e.result.orderLogs)})},traces(){Object(s.h)(this.$route.query.sn).then(e=>{e.success&&(this.logistics=e.result)})},received(e){Object(s.j)(e).then(e=>{e.success&&(this.$Message.success("确认收货成功"),this.getDetail())})},goPay(e){this.$router.push({path:"/payment",query:{orderType:"ORDER",sn:e}})},applyAfterSale(e){this.$router.push({name:"ApplyAfterSale",query:{sn:e}})},comment(e,r){this.$router.push({path:"/home/addEval",query:{sn:e,index:r}})},complain(e,r){this.$router.push({name:"Complain",query:{sn:e,index:r}})},handleCancelOrder(e){this.cancelParams.orderSn=e,Object(a.f)("CANCEL").then(e=>{e.success&&(this.cancelReason=e.result,this.cancelAvail=!0,this.cancelParams.reason=this.cancelReason[0].reason)})},sureCancel(){Object(s.b)(this.cancelParams).then(e=>{e.success&&(this.$Message.success("取消订单成功"),this.getDetail(),this.cancelAvail=!1)})}},mounted(){this.getDetail(),this.traces()}},t=(t("a76d"),t("2877")),o=Object(t.a)(o,function(){var s=this,e=s.$createElement,a=s._self._c||e;return s.order.order?a("div",{staticClass:"order-detail"},[a("card",{attrs:{_Title:"订单详情",_Size:16}}),s.order.allowOperationVO.pay||s.order.allowOperationVO.rog||s.order.allowOperationVO.cancel?a("Card",{staticClass:"mb_10"},[s.order.allowOperationVO.pay?a("Button",{attrs:{type:"success",size:"small"},on:{click:function(e){return s.goPay(s.order.order.sn)}}},[s._v("去支付")]):s._e(),s.order.allowOperationVO.rog?a("Button",{attrs:{type:"info",size:"small"},on:{click:function(e){return s.received(s.order.order.sn)}}},[s._v("确认收货")]):s._e(),s.order.allowOperationVO.cancel?a("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return s.handleCancelOrder(s.order.order.sn)}}},[s._v("取消订单")]):s._e()],1):s._e(),s.order.order.verificationCode?a("p",{staticClass:"verificationCode"},[s._v("核验码："),a("span",[s._v(s._s(s.order.order.verificationCode))])]):s._e(),a("div",{staticClass:"order-card"},[a("p",{staticClass:"global_color fontsize_18"},[s._v(s._s(s.order.orderStatusValue))]),a("p",[s._v("订单号："+s._s(s.order.order.sn))]),a("div",{staticClass:"operation-time",staticStyle:{color:"#999"}},[s._v("操作时间："+s._s(s.order.order.updateTime))]),a("Steps",{staticClass:"progress",attrs:{current:s.progressList.length,direction:"vertical"}},s._l(s.progressList,function(e,r){return a("Step",{key:r,attrs:{title:e.message,content:e.createTime}})}),1)],1),a("div",{staticClass:"order-card"},[a("h3",[s._v("收货人信息")]),a("p",[s._v("收货人："+s._s(s.order.order.consigneeName))]),a("p",[s._v("手机号码："+s._s(s._f("secrecyMobile")(s.order.order.consigneeMobile)))]),a("p",[s._v("收货地址："+s._s(s._f("unitAddress")(s.order.order.consigneeAddressPath))+" "+s._s(s.order.order.consigneeDetail))])]),a("div",{staticClass:"order-card"},[a("h3",[s._v("付款信息")]),a("p",[s._v("支付方式："+s._s(s.order.paymentMethodValue))]),a("p",[s._v("付款状态："+s._s(s.order.payStatusValue))])]),s.order.order.verificationCode?s._e():a("div",{staticClass:"order-card"},[a("h3",[s._v("配送信息")]),a("p",[s._v("配送方式："+s._s(s.order.deliveryMethodValue))]),a("p",[s._v("配送状态："+s._s(s.order.deliverStatusValue))]),s.logistics?a("div",{staticClass:"div-express-log"},[a("p",{staticClass:"express-log"}),a("p",[s._v("订单日志：")]),s._l(s.logistics.traces,function(e,r){return a("p",{key:r},[a("span",{staticClass:"time"},[s._v(s._s(e.AcceptTime))]),a("span",{staticClass:"detail"},[s._v(s._s(e.AcceptStation))])])}),a("p")],2):s._e()]),a("div",{staticClass:"order-card"},[a("h3",[s._v("发票信息")]),s.order.order.receipt?[a("p",[s._v("发票抬头："+s._s(s.order.order.receiptVO.receiptTitle))]),a("p",[s._v("发票内容："+s._s(s.order.order.receiptVO.receiptContent))]),s.order.order.receiptVO.taxpayerId?a("p",[s._v("纳税人识别号："+s._s(s.order.order.receiptVO.taxpayerId))]):s._e()]:a("div",{staticStyle:{color:"#999","margin-left":"5px"}},[s._v(" 未开发票 ")])],2),a("div",{staticClass:"goods"},[a("div",{staticClass:"shop-name"},[a("span",{on:{click:function(e){return s.shopPage(s.order.order.storeId)}}},[s._v(s._s(s.order.order.storeName))])]),a("table",[s._m(0),a("tbody",s._l(s.order.orderItems,function(r,t){return a("tr",{key:t},[a("td",[a("img",{attrs:{src:r.image,alt:""},on:{click:function(e){return s.goodsDetail(r.id,r.goodsId)}}}),a("div",[a("p",{staticClass:"hover-color",on:{click:function(e){return s.goodsDetail(r.id,r.goodsId)}}},[s._v(" "+s._s(r.goodsName)+" ")])])]),a("td",[s._v(s._s(r.id))]),a("td",[s._v(s._s(s._f("unitPrice")(r.goodsPrice,"￥")))]),a("td",[s._v(s._s(r.num))]),a("td",[s._v(s._s(s._f("unitPrice")(r.goodsPrice*r.num,"￥")))]),a("td",[r.afterSaleStatus.includes("NOT_APPLIED")||r.afterSaleStatus.includes("PART_AFTER_SALE")?a("Button",{staticClass:"mb_5",attrs:{type:"info",size:"small"},on:{click:function(e){return s.applyAfterSale(r.sn)}}},[s._v("申请售后")]):s._e(),"UNFINISHED"==r.commentStatus?a("Button",{staticClass:"fontsize_12 mb_5",attrs:{size:"small",type:"success"},on:{click:function(e){return s.comment(s.order.order.sn,t)}}},[s._v("评价")]):s._e(),"NO_APPLY"==r.complainStatus?a("Button",{staticClass:"fontsize_12",attrs:{type:"warning",size:"small"},on:{click:function(e){return s.complain(s.order.order.sn,t)}}},[s._v("投诉")]):s._e()],1)])}),0)]),a("div",{staticClass:"order-price"},[a("div",[a("span",[s._v("商品件数：")]),a("span",[s._v(s._s(s.order.order.goodsNum)+"件")])]),a("div",[a("span",[s._v("商品总价：")]),a("span",[s._v(s._s(s._f("unitPrice")(s.order.order.goodsPrice,"￥")))]),a("br")]),a("div",[a("span",[s._v("运费：")]),a("span",[s._v("+"+s._s(s._f("unitPrice")(s.order.order.freightPrice,"￥")))]),a("br")]),s.order.order.priceDetailDTO.couponPrice?a("div",[a("span",[s._v("优惠券：")]),a("span",[s._v("-"+s._s(s._f("unitPrice")(s.order.order.priceDetailDTO.couponPrice||0,"￥")))])]):s._e(),s.order.order.discountPrice?a("div",[a("span",[s._v("活动优惠：")]),a("span",[s._v("-"+s._s(s._f("unitPrice")(s.order.order.discountPrice,"￥")))])]):s._e(),a("div",[a("span",[s._v("应付金额：")]),a("span",{staticClass:"actrual-price"},[s._v(s._s(s._f("unitPrice")(s.order.order.flowPrice,"￥")))])])])]),a("Modal",{attrs:{title:"请选择取消订单原因"},on:{"on-ok":s.sureCancel,"on-cancel":function(e){s.cancelAvail=!1}},model:{value:s.cancelAvail,callback:function(e){s.cancelAvail=e},expression:"cancelAvail"}},[a("RadioGroup",{attrs:{vertical:"",type:"button","button-style":"solid"},model:{value:s.cancelParams.reason,callback:function(e){s.$set(s.cancelParams,"reason",e)},expression:"cancelParams.reason"}},s._l(s.cancelReason,function(e){return a("Radio",{key:e.id,attrs:{label:e.reason}},[s._v(" "+s._s(e.reason)+" ")])}),1)],1)],1):s._e()},[function(){var e=this,r=e.$createElement,r=e._self._c||r;return r("thead",[r("tr",[r("th",{attrs:{width:"40%"}},[e._v("商品")]),r("th",{attrs:{width:"20%"}},[e._v("货号")]),r("th",{attrs:{width:"10%"}},[e._v("单价")]),r("th",{attrs:{width:"10%"}},[e._v("数量")]),r("th",{attrs:{width:"10%"}},[e._v("小计")]),r("th",{attrs:{width:"10%"}},[e._v("操作")])])])}],!1,null,"0936cfd5",null);r.default=o.exports}}]);