(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-df257664"],{"18a9":function(e,t,a){},"2f94":function(e,t,a){"use strict";a.d(t,"e",function(){return o}),a.d(t,"f",function(){return i}),a.d(t,"b",function(){return r}),a.d(t,"a",function(){return s}),a.d(t,"c",function(){return d}),a.d(t,"d",function(){return l});var n=a("ff66");function o(){return Object(n.d)({url:"/buyer/memberAddress",needToken:!0,method:n.a.GET})}function i(e){return Object(n.d)({url:"/buyer/memberAddress",needToken:!0,method:n.a.POST,data:e})}function r(e){return Object(n.d)({url:"/buyer/memberAddress",needToken:!0,method:n.a.PUT,params:e})}function s(e){return Object(n.d)({url:"/buyer/memberAddress/delById/"+e,needToken:!0,method:n.a.DELETE})}function d(e){return Object(n.d)({url:"/buyer/memberAddress/get/"+e,needToken:!0,method:n.a.GET})}function l(e){return Object(n.d)({url:n.c+"/common/region/region",needToken:!0,method:n.a.GET,params:e})}},3577:function(e,t,a){"use strict";a("b88b")},5945:function(e,t,a){"use strict";var n=a("862d"),o=a.n(n),i=a("2f94"),r={name:"map",props:{useApi:{default:!0,type:Boolean}},data(){return{config:a("f121"),showMap:!1,mapSearch:"",map:null,autoComplete:null,geocoder:null,positionPicker:null,tips:[],addrContent:{},loading:!1}},watch:{mapSearch:function(e){this.searchOfMap(e)}},methods:{ok(){this.loading=!0;const e=this.addrContent.address,t=this.addrContent.regeocode.addressComponent.township,a=e.indexOf(t)+t.length;this.addrContent.detail=e.substring(a);var n={cityCode:this.addrContent.regeocode.addressComponent.citycode,townName:this.addrContent.regeocode.addressComponent.township};this.useApi?Object(i.d)(n).then(e=>{this.loading=!1,e.success&&(this.showMap=!1,this.addrContent.addr=e.result.name.replace(/,/g," "),this.addrContent.addrId=e.result.id,this.$emit("getAddress",this.addrContent))}):(this.loading=!1,this.showMap=!1,this.$emit("getAddress",this.addrContent))},init(){o.a.load({key:this.config.aMapKey,version:"",plugins:["AMap.ToolBar","AMap.Autocomplete","AMap.PlaceSearch","AMap.Geolocation","AMap.Geocoder"],AMapUI:{version:"1.1",plugins:["misc/PositionPicker"]}}).then(e=>{let t=this;this.map=new e.Map("map-container",{zoom:12}),t.map.addControl(new e.ToolBar),t.map.addControl(new e.Autocomplete),t.map.addControl(new e.PlaceSearch),t.map.addControl(new e.Geocoder);var a={city:"全国"};t.autoComplete=new e.Autocomplete(a),t.geocoder=new e.Geocoder(a),t.positionPicker=new AMapUI.PositionPicker({mode:"dragMap",map:t.map}),t.positionPicker.start(),t.positionPicker.on("success",function(e){t.addrContent=e})}).catch(e=>{})},searchOfMap(e){let a=this;this.autoComplete.search(e,function(e,t){"complete"===e&&"OK"===t.info?a.tips=t.tips:a.tips=[]})},selectAddr(e){if(!e)return this.$Message.warning("请选择正确点位"),!1;e=[e.lng,e.lat];this.positionPicker.start(e)}},mounted(){this.init()}},n=(a("3577"),a("2877")),r=Object(n.a)(r,function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{staticClass:"lili-map"},[n("Modal",{attrs:{title:"选择地址",width:"800"},model:{value:a.showMap,callback:function(e){a.showMap=e},expression:"showMap"}},[n("div",{staticClass:"address"},[a._v(a._s(a.addrContent.address))]),n("div",{attrs:{id:"map-container"}}),n("div",{staticClass:"search-con"},[n("Input",{attrs:{placeholder:"输入关键字搜索",id:"input-map"},model:{value:a.mapSearch,callback:function(e){a.mapSearch=e},expression:"mapSearch"}}),n("ul",a._l(a.tips,function(t,e){return n("li",{key:e,on:{click:function(e){return a.selectAddr(t.location)}}},[n("p",[a._v(a._s(t.name))]),n("p",[a._v(a._s(t.district+t.address))])])}),0)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"default"},on:{click:function(e){a.showMap=!1}}},[a._v("取消")]),n("Button",{attrs:{type:"primary",loading:a.loading},on:{click:a.ok}},[a._v("确定")])],1)])],1)},[],!1,null,"a80f964e",null);t.a=r.exports},7746:function(e,t,a){"use strict";a("18a9")},"7dfd":function(e,t,a){"use strict";a.r(t),a.d(t,"mobile",function(){return n}),a.d(t,"email",function(){return o}),a.d(t,"password",function(){return i}),a.d(t,"integer",function(){return r}),a.d(t,"Integer",function(){return s}),a.d(t,"money",function(){return d}),a.d(t,"TINumber",function(){return l}),a.d(t,"IDCard",function(){return c}),a.d(t,"userName",function(){return p}),a.d(t,"URL",function(){return u}),a.d(t,"TEL",function(){return f}),a.d(t,"licenseNum",function(){return m});const n=/^0?(13[0-9]|14[0-9]|15[0-9]|16[0-9]|17[0-9]|18[0-9]|19[0-9])[0-9]{8}$/,o=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,i=/^[@A-Za-z0-9!#$%^&*.~,]{6,20}$/,r=/^[1-9]\d*$/,s=/^[0-9]\d*$/,d=/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/,l=/^((\d{6}[0-9A-Z]{9})|([0-9A-Za-z]{2}\d{6}[0-9A-Za-z]{10,12}))$/,c=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,p=/[A-Za-z0-9_\-\u4e00-\u9fa5]$/,u=/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/,f=/0\d{2,3}-\d{7,8}/,m=/(^(?:(?![IOZSV])[\dA-Z]){2}\d{6}(?:(?![IOZSV])[\dA-Z]){10}$)|(^\d{15}$)/},"862d":function(e,t,a){"use strict";e.exports=function(){function s(e){var t=[];return e.AMapUI&&t.push(a(e.AMapUI)),e.Loca&&t.push(n(e.Loca)),Promise.all(t)}function a(r){return new Promise(function(n,t){var o=[];if(r.plugins)for(var e=0;e<r.plugins.length;e+=1)-1==l.AMapUI.plugins.indexOf(r.plugins[e])&&o.push(r.plugins[e]);if(c.AMapUI===d.failed)t("前次请求 AMapUI 失败");else if(c.AMapUI===d.notload){c.AMapUI=d.loading,l.AMapUI.version=r.version||l.AMapUI.version,e=l.AMapUI.version;var a=document.body||document.head,i=document.createElement("script");i.type="text/javascript",i.src="https://webapi.amap.com/ui/"+e+"/main.js",i.onerror=function(e){c.AMapUI=d.failed,t("请求 AMapUI 失败")},i.onload=function(){if(c.AMapUI=d.loaded,o.length)window.AMapUI.loadUI(o,function(){for(var e=0,t=o.length;e<t;e++){var a=o[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}for(n();p.AMapUI.length;)p.AMapUI.splice(0,1)[0]()});else for(n();p.AMapUI.length;)p.AMapUI.splice(0,1)[0]()},a.appendChild(i)}else c.AMapUI===d.loaded?r.version&&r.version!==l.AMapUI.version?t("不允许多个版本 AMapUI 混用"):o.length?window.AMapUI.loadUI(o,function(){for(var e=0,t=o.length;e<t;e++){var a=o[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}n()}):n():r.version&&r.version!==l.AMapUI.version?t("不允许多个版本 AMapUI 混用"):p.AMapUI.push(function(e){e?t(e):o.length?window.AMapUI.loadUI(o,function(){for(var e=0,t=o.length;e<t;e++){var a=o[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}n()}):n()})})}function n(r){return new Promise(function(e,t){if(l.AMap.version.startsWith("2.0"))t("Loca 暂不适配 JSAPI 2.0,请使用 1.4.15");else if(c.Loca===d.failed)t("前次请求 Loca 失败");else if(c.Loca===d.notload){c.Loca=d.loading,l.Loca.version=r.version||l.Loca.version;var a=l.Loca.version,n=l.key,o=document.body||document.head,i=document.createElement("script");i.type="text/javascript",i.src="https://webapi.amap.com/loca?v="+a+"&key="+n,i.onerror=function(e){c.Loca=d.failed,t("请求 AMapUI 失败")},i.onload=function(){for(c.Loca=d.loaded,e();p.Loca.length;)p.Loca.splice(0,1)[0]()},o.appendChild(i)}else c.Loca===d.loaded?r.version&&r.version!==l.Loca.version?t("不允许多个版本 Loca 混用"):e():r.version&&r.version!==l.Loca.version?t("不允许多个版本 Loca 混用"):p.Loca.push(function(e){e?t(e):t()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var d;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(d||(d={}));var l={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},c={AMap:d.notload,AMapUI:d.notload,Loca:d.notload},p={AMap:[],AMapUI:[],Loca:[]},u=[],f=function(e){"function"==typeof e&&(c.AMap===d.loaded?e(window.AMap):u.push(e))};return{load:function(r){return new Promise(function(t,a){if(c.AMap==d.failed)a("");else if(c.AMap==d.notload){var e=r.key,n=r.version,o=r.plugins;e?(window.AMap&&"lbs.amap.com"!==location.host&&a("禁止多种API加载方式混用"),l.key=e,l.AMap.version=n||l.AMap.version,l.AMap.plugins=o||l.AMap.plugins,c.AMap=d.loading,n=document.body||document.head,window.___onAPILoaded=function(e){if(delete window.___onAPILoaded,e)c.AMap=d.failed,a(e);else for(c.AMap=d.loaded,s(r).then(function(){t(window.AMap)})["catch"](a);u.length;)u.splice(0,1)[0]()},o=document.createElement("script"),o.type="text/javascript",o.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+l.AMap.version+"&key="+e+"&plugin="+l.AMap.plugins.join(","),o.onerror=function(e){c.AMap=d.failed,a(e)},n.appendChild(o)):a("请填写key")}else if(c.AMap==d.loaded)if(r.key&&r.key!==l.key)a("多个不一致的 key");else if(r.version&&r.version!==l.AMap.version)a("不允许多个版本 JSAPI 混用");else{if(e=[],r.plugins)for(n=0;n<r.plugins.length;n+=1)-1==l.AMap.plugins.indexOf(r.plugins[n])&&e.push(r.plugins[n]);e.length?window.AMap.plugin(e,function(){s(r).then(function(){t(window.AMap)})["catch"](a)}):s(r).then(function(){t(window.AMap)})["catch"](a)}else if(r.key&&r.key!==l.key)a("多个不一致的 key");else if(r.version&&r.version!==l.AMap.version)a("不允许多个版本 JSAPI 混用");else{var i=[];if(r.plugins)for(n=0;n<r.plugins.length;n+=1)-1==l.AMap.plugins.indexOf(r.plugins[n])&&i.push(r.plugins[n]);f(function(){i.length?window.AMap.plugin(i,function(){s(r).then(function(){t(window.AMap)})["catch"](a)}):s(r).then(function(){t(window.AMap)})["catch"](a)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,l={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},c={AMap:d.notload,AMapUI:d.notload,Loca:d.notload},p={AMap:[],AMapUI:[],Loca:[]}}}}()},b88b:function(e,t,a){},d259:function(e,t,a){"use strict";a.r(t);var n=a("3951"),o=a("5945"),i=a("7dfd"),r=a("2f94"),o={name:"AddAddress",data(){return{formData:{isDefault:!1},ruleInline:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],address:[{required:!0,message:"请输入地址",trigger:"change"}],detail:[{required:!0,message:"请输入详细地址",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号码"},{pattern:i.mobile,trigger:"blur",message:"请输入正确的手机号"}]},loading:!1,mapMsg:{}}},methods:{save(){this.$refs.form.validate(e=>{if(e){const e=JSON.parse(JSON.stringify(this.formData));e.consigneeAddressPath=e.address.replace(/\s/g,","),delete e.address,this.loading=!0,(this.$route.query.id?Object(r.b)(e).then(e=>{e.success&&(this.loading=!1,this.$router.push("/home/MyAddress"))}):Object(r.f)(e).then(e=>{e.success&&(this.loading=!1,this.$router.push("/home/MyAddress"))})).catch(()=>{this.loading=!1})}})},getAddrById(e){Object(r.c)(e).then(e=>{if(e.success){const t=e.result;t.address=e.result.consigneeAddressPath.replace(/,/g," "),this.formData=t}})},getAddress(e){this.mapMsg=e,this.$set(this.formData,"address",e.addr),this.$set(this.formData,"consigneeAddressIdPath",e.addrId),this.$set(this.formData,"detail",e.detail),this.formData.lat=e.position.lat,this.formData.lon=e.position.lng}},mounted(){var e=this.$route.query.id;e&&this.getAddrById(e)},components:{card:n.a,liliMap:o.a}},a=(a("7746"),a("2877")),o=Object(a.a)(o,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",[e("card",{attrs:{_Title:"收货地址"}}),e("div",{staticClass:"add-box"},[e("Form",{ref:"form",attrs:{model:t.formData,"label-position":"left","label-width":100,rules:t.ruleInline}},[e("FormItem",{attrs:{label:"收件人",prop:"name"}},[e("i-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入收件人姓名"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),e("FormItem",{attrs:{label:"收件地区",prop:"address"}},[e("i-input",{staticStyle:{width:"600px"},attrs:{disabled:"",placeholder:"请选择收货地址"},model:{value:t.formData.address,callback:function(e){t.$set(t.formData,"address",e)},expression:"formData.address"}}),e("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.$refs.map.showMap=!0}}},[t._v("选择")])],1),e("FormItem",{attrs:{label:"详细地址",prop:"detail"}},[e("i-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入详细地址"},model:{value:t.formData.detail,callback:function(e){t.$set(t.formData,"detail",e)},expression:"formData.detail"}})],1),e("FormItem",{attrs:{label:"手机号码",prop:"mobile"}},[e("i-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入收件人手机号"},model:{value:t.formData.mobile,callback:function(e){t.$set(t.formData,"mobile",e)},expression:"formData.mobile"}})],1),e("FormItem",{attrs:{label:"地址别名"}},[e("i-input",{staticStyle:{width:"600px"},attrs:{length:"",maxlength:4,placeholder:"请输入地址别名，例如公司"},model:{value:t.formData.alias,callback:function(e){t.$set(t.formData,"alias",e)},expression:"formData.alias"}})],1),e("FormItem",{attrs:{label:"默认地址"}},[e("i-switch",{model:{value:t.formData.isDefault,callback:function(e){t.$set(t.formData,"isDefault",e)},expression:"formData.isDefault"}})],1)],1)],1),e("div",{staticClass:"mt_20"},[e("Button",{staticClass:"mr_10",attrs:{type:"primary",loading:t.loading},on:{click:t.save}},[t._v("保存收货地址")]),e("Button",{on:{click:function(e){return t.$router.back()}}},[t._v("返回")])],1),e("lili-map",{ref:"map",on:{getAddress:t.getAddress}})],1)},[],!1,null,"581e157e",null);t.default=o.exports}}]);