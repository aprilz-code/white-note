(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-45d2f438"],{"60c3":function(t,e,s){"use strict";s("a9e9")},"7dfd":function(t,e,s){"use strict";s.r(e),s.d(e,"mobile",function(){return a}),s.d(e,"email",function(){return o}),s.d(e,"password",function(){return r}),s.d(e,"integer",function(){return i}),s.d(e,"Integer",function(){return n}),s.d(e,"money",function(){return c}),s.d(e,"TINumber",function(){return l}),s.d(e,"IDCard",function(){return d}),s.d(e,"userName",function(){return u}),s.d(e,"URL",function(){return p}),s.d(e,"TEL",function(){return m}),s.d(e,"licenseNum",function(){return g});const a=/^0?(13[0-9]|14[0-9]|15[0-9]|16[0-9]|17[0-9]|18[0-9]|19[0-9])[0-9]{8}$/,o=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,r=/^[@A-Za-z0-9!#$%^&*.~,]{6,20}$/,i=/^[1-9]\d*$/,n=/^[0-9]\d*$/,c=/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/,l=/^((\d{6}[0-9A-Z]{9})|([0-9A-Za-z]{2}\d{6}[0-9A-Za-z]{10,12}))$/,d=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,u=/[A-Za-z0-9_\-\u4e00-\u9fa5]$/,p=/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/,m=/0\d{2,3}-\d{7,8}/,g=/(^(?:(?![IOZSV])[\dA-Z]){2}\d{6}(?:(?![IOZSV])[\dA-Z]){10}$)|(^\d{15}$)/},a9e9:function(t,e,s){},c222:function(t,e,s){"use strict";s.r(e);var a=s("8194"),o=s("7dfd"),r=s("658f"),r={name:"Distribution",components:{vueQr:s.n(r).a},data(){return{status:0,applyForm:{},rules:{name:[{required:!0,message:"请输入真实姓名"}],idNumber:[{required:!0,message:"请输入身份证号"},{pattern:o.IDCard,message:"请输入正确的身份证号"}]},tabName:"goodsChecked",result:{},applyLoading:!1,goodsLoading:!1,withdrawApplyModal:!1,withdrawPrice:0,goodsData:{},logData:{},goodsColumns:[{title:"商品名称",slot:"name",width:400},{title:"商品价格",slot:"price"},{title:"佣金",slot:"commission"},{title:"操作",slot:"action",minWidth:120}],logColumns:[{title:"编号",slot:"sn"},{title:"申请时间",slot:"time"},{title:"提现金额",slot:"price"},{title:"提现状态",slot:"status"}],params:{pageNumber:1,pageSize:20,checked:!0},orderParams:{pageNumber:1,pageSize:20},logParams:{pageNumber:1,pageSize:20},qrcode:"",qrcodeShow:!1,base64Img:"",goodsNameCurr:""}},mounted(){this.distribution()},methods:{apply(){this.$refs.form.validate(t=>{t&&(this.applyLoading=!0,Object(a.h)(this.form).then(t=>{this.applyLoading=!1,t.success&&(this.$Message.success("申请已提交，请等待管理员审核"),this.status=1)}))})},withdraw(){Object(a.t)({price:this.withdrawPrice}).then(t=>{this.withdrawApplyModal=!1,this.price=0,t.success?(this.$Message.success("申请已提交，请等待审核"),this.distribution(),this.getLog()):this.$Message.error(t.message)})},qrcodeData(t){this.base64Img=t},downloadQrcode(){let t=document.createElement("a"),e=new MouseEvent("click");t.download=this.goodsNameCurr||"photo",t.href=this.base64Img,t.dispatchEvent(e)},tabPaneChange(t){"goodsChecked"===t?(this.params.checked=!0,this.params.pageNUmber=1,this.getGoodsData()):"goodsUncheck"===t?(this.params.checked=!1,this.getGoodsData()):"log"===t&&(this.logParams.pageNumber=1,this.getLog())},changePage(t){this.params.pageNumber=t,this.getGoodsData()},changePageLog(t){this.logParams.pageNumber=t,this.getLog()},selectGoods(t,e){e={distributionGoodsId:t,checked:e};Object(a.P)(e).then(t=>{t.success&&(this.$Message.success("操作成功！"),this.getGoodsData())})},fenxiao(t){this.qrcode=`${location.origin}/goodsDetail?skuId=${t.skuId}&goodsId=${t.goodsId}&distributionId=`+this.result.id,this.goodsNameCurr=t.goodsName,this.qrcodeShow=!0},getGoodsData(){Object(a.z)(this.params).then(t=>{t.success&&(this.goodsData=t.result)})},getLog(){Object(a.u)(this.logParams).then(t=>{t.success&&(this.logData=t.result)})},distribution(){Object(a.v)().then(t=>{var e;t.result?(this.result=t.result,"PASS"===(e=t.result.distributionStatus)?(this.status=2,this.getGoodsData()):this.status="RETREAT"===e||"REFUSE"===e?0:1):t.data.success||22e3!==t.data.code?this.status=0:this.status=3})}}},s=(s("60c3"),s("2877")),r=Object(s.a)(r,function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"wrapper"},[a("card",{attrs:{_Title:"我的分销"}}),0===s.status?a("div",[a("Alert",{attrs:{type:"warning"}},[s._v("分销商申请")]),a("Form",{ref:"form",attrs:{model:s.applyForm,rules:s.rules}},[a("FormItem",{attrs:{label:"姓名",prop:"name"}},[a("Input",{model:{value:s.applyForm.name,callback:function(t){s.$set(s.applyForm,"name",t)},expression:"applyForm.name"}})],1),a("FormItem",{attrs:{label:"身份证号",prop:"idNumber"}},[a("Input",{model:{value:s.applyForm.idNumber,callback:function(t){s.$set(s.applyForm,"idNumber",t)},expression:"applyForm.idNumber"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary",loading:s.applyLoading},on:{click:s.apply}},[s._v("提交申请")])],1)],1)],1):s._e(),1===s.status?a("div",[a("Alert",{attrs:{type:"success"}},[s._v(" 您提交的信息正在审核 "),a("template",{slot:"desc"},[s._v("提交认证申请后，工作人员将在三个工作日进行核对完成审核")])],2)],1):s._e(),2===s.status?a("div",[a("div",{staticClass:"box"},[a("div",{staticClass:"mb_20 account-price"},[a("span",{staticClass:"subTips"},[s._v("可提现金额：")]),a("span",{staticClass:"fontsize_48 global_color"},[s._v("￥"+s._s(s._f("unitPrice")(s.result.canRebate)))]),a("span",{staticClass:"subTips"},[s._v("冻结金额：")]),a("span",{},[s._v("￥"+s._s(s._f("unitPrice")(s.result.commissionFrozen)))]),a("Button",{staticClass:"ml_20",attrs:{type:"primary",size:"small"},on:{click:function(t){s.withdrawApplyModal=!0}}},[s._v("申请提现")])],1)]),a("Tabs",{attrs:{value:s.tabName},on:{"on-click":s.tabPaneChange}},[a("TabPane",{attrs:{label:"已选商品",name:"goodsChecked"}},[a("Table",{attrs:{stripe:"",columns:s.goodsColumns,data:s.goodsData.records},scopedSlots:s._u([{key:"name",fn:function(t){var e=t.row;return[a("div",{staticClass:"goods-msg",on:{click:function(t){return s.linkTo("/goodsDetail?skuId="+e.skuId+"&goodsId="+e.goodsId)}}},[a("img",{staticStyle:{"vertical-align":"top"},attrs:{src:e.thumbnail,width:"60",height:"60",alt:""}}),s._v(" "+s._s(e.goodsName))])]}},{key:"price",fn:function(t){t=t.row;return[a("span",[s._v(" ￥"+s._s(s._f("unitPrice")(t.price)))])]}},{key:"commission",fn:function(t){t=t.row;return[a("span",[s._v(" ￥"+s._s(s._f("unitPrice")(t.commission)))])]}},{key:"action",fn:function(t){var e=t.row;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(t){return s.fenxiao(e)}}},[s._v("分销商品")]),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return s.selectGoods(e.id,!1)}}},[s._v("取消选择")])]}}],null,!1,2446813097)}),a("div",{staticClass:"page-size"},[a("Page",{attrs:{current:s.params.pageNumber,total:s.goodsData.total,"page-size":s.params.pageSize,size:"small","show-total":"","show-elevator":""},on:{"on-change":s.changePage}})],1)],1),a("TabPane",{attrs:{label:"未选商品",name:"goodsUncheck"}},[a("Table",{attrs:{stripe:"",columns:s.goodsColumns,data:s.goodsData.records},scopedSlots:s._u([{key:"name",fn:function(t){var e=t.row;return[a("div",{staticClass:"goods-msg",on:{click:function(t){return s.linkTo("/goodsDetail?skuId="+e.skuId+"&goodsId="+e.goodsId)}}},[a("img",{staticStyle:{"vertical-align":"top"},attrs:{src:e.thumbnail,width:"60",height:"60",alt:""}}),s._v(" "+s._s(e.goodsName))])]}},{key:"price",fn:function(t){t=t.row;return[a("span",[s._v(" ￥"+s._s(s._f("unitPrice")(t.price)))])]}},{key:"commission",fn:function(t){t=t.row;return[a("span",[s._v(" ￥"+s._s(s._f("unitPrice")(t.commission)))])]}},{key:"action",fn:function(t){var e=t.row;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return s.selectGoods(e.id,!0)}}},[s._v("选择商品")])]}}],null,!1,1648847499)}),a("div",{staticClass:"page-size"},[a("Page",{attrs:{current:s.params.pageNumber,total:s.goodsData.total,"page-size":s.params.pageSize,size:"small","show-total":"","show-elevator":""},on:{"on-change":s.changePage}})],1)],1),a("TabPane",{attrs:{label:"提现记录",name:"log"}},[a("Table",{attrs:{stripe:"",columns:s.logColumns,data:s.logData.records},scopedSlots:s._u([{key:"sn",fn:function(t){t=t.row;return[a("span",[s._v(s._s(t.sn))])]}},{key:"time",fn:function(t){t=t.row;return[a("span",[s._v(s._s(t.createTime))])]}},{key:"price",fn:function(t){t=t.row;return["REFUSE"==t.distributionCashStatus?a("span",{staticStyle:{color:"green"}},[s._v(" +￥"+s._s(s._f("unitPrice")(t.price)))]):a("span",{staticStyle:{color:"red"}},[s._v(" -￥"+s._s(s._f("unitPrice")(t.price)))])]}},{key:"status",fn:function(t){t=t.row;return[a("span",[s._v(" "+s._s("APPLY"==t.distributionCashStatus?"待处理":"PASS"==t.distributionCashStatus?"通过":"拒绝"))])]}}],null,!1,2787688442)}),a("div",{staticClass:"page-size"},[a("Page",{attrs:{current:s.logParams.pageNumber,total:s.logData.total,"page-size":s.logParams.pageSize,size:"small","show-total":"","show-elevator":""},on:{"on-change":s.changePageLog}})],1)],1)],1)],1):s._e(),3===s.status?a("div",[a("Alert",{attrs:{type:"error"}},[s._v(" 分销功能暂未开启 "),a("template",{slot:"desc"},[s._v("提交认证申请后，工作人员将在三个工作日进行核对完成审核")])],2)],1):s._e(),a("Modal",{attrs:{width:"530"},model:{value:s.withdrawApplyModal,callback:function(t){s.withdrawApplyModal=t},expression:"withdrawApplyModal"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"edit"}}),a("span",[s._v("提现金额")])],1),a("div",[a("Input",{attrs:{size:"large",number:"",maxlength:"9"},model:{value:s.withdrawPrice,callback:function(t){s.withdrawPrice=t},expression:"withdrawPrice"}},[a("span",{attrs:{slot:"append"},slot:"append"},[s._v("元")])])],1),a("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",size:"large"},on:{click:s.withdraw}},[s._v("提现")])],1)]),a("Modal",{attrs:{title:"分销商品",width:"800"},model:{value:s.qrcodeShow,callback:function(t){s.qrcodeShow=t},expression:"qrcodeShow"}},[a("Alert",{attrs:{type:"warning"}},[s._v(" 下载二维码或者复制链接分享商品 ")]),a("div",{staticStyle:{width:"200px",height:"200px",border:"1px solid #eee"}},[a("vue-qr",{attrs:{text:s.qrcode,callback:s.qrcodeData,margin:0,colorDark:"#000",colorLight:"#fff",size:200}}),a("Button",{staticClass:"download-btn",attrs:{type:"success"},on:{click:s.downloadQrcode}},[s._v("下载二维码")])],1),a("div",{staticClass:"mt_10"},[s._v("商品链接："),a("Input",{staticStyle:{width:"400px"},model:{value:s.qrcode,callback:function(t){s.qrcode=t},expression:"qrcode"}})],1)],1)],1)},[],!1,null,"44e30b28",null);e.default=r.exports}}]);
