## 前言

在查看RocketMQ消费者分类时，一直有个疑惑,PushConsumer实现方式是注册一个消费监听器， 长轮询拉取消息，缓存本地，并按配置消费。这种不是属于'Pull'么,为啥叫官方叫Push呢？

> tips : 长轮询其实原理跟轮询差不多，都是采用轮询的方式。不过，如果服务端的数据没有发生变更，会 一直 hold 住请求，直到服务端的数据发生变化，或者等待一定时间超时才会返回。返回后，客户端又会立即再次发起下一次长轮询。

以下来着官方文档介绍：  
[RocketMQ官网-消费者分类](https://rocketmq.apache.org/zh/docs/featureBehavior/06consumertype)

#### PushConsumer

PushConsumers是一种高度封装的消费者类型，消费消息仅通过消费监听器处理业务并返回消费结果。消息的获取、消费状态提交以及消费重试都通过 Apache RocketMQ 的客户端SDK完成。

#### 使用方式

PushConsumer的使用方式比较固定，在消费者初始化时注册一个消费监听器，并在消费监听器内部实现消息处理逻辑。由 Apache RocketMQ 的SDK在后台完成消息获取、触发监听器调用以及进行消息重试处理。

![消费者分类](https://file.losey.top/blog/img-1679453262187.png)

## 正文

虽然在 RocketMQ 中，长轮询监听消费模式采用的是 "Pull" 模式，但是 DefaultMQPushConsumer 中的 "Push" 实际上指的是推送配置信息，而非消息推送模式。

在 RocketMQ 中，消费者可以通过推送模式（Push）或者拉取模式（Pull）来消费消息，其中，推送模式是指消息服务器主动将消息推送给消费者，而拉取模式是指消费者主动从消息服务器拉取消息。而 DefaultMQPushConsumer
中的 "Push" 实际上指的是在消费者启动时，消息服务器会主动推送该消费者的配置信息，包括 Topic 和消费者的订阅关系、消费模式、消息模式等，消费者会根据这些配置信息向消息服务器发起拉取消息的请求。

在长轮询监听消费模式下，消费者会周期性地向消息服务器发起拉取消息的请求，如果没有新的消息，则消息服务器会等待一段时间再返回响应，直到有新的消息到来或者等待时间超时。这种方式可以看作是拉取模式和推送模式的一种结合，因为消费者会周期性地向消息服务器发起拉取消息的请求，所以可以看作是消费者在拉取消息，但是在等待消息到来的过程中，消息服务器会主动向消费者推送配置信息，包括消息模式、消费模式等，因此称为 "
Push" 模式。

需要注意的是，在 RocketMQ 中，长轮询监听消费模式并不是 "Push" 模式，而是一种结合了拉取模式和推送模式的特殊消费模式。